<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ex Post Survey Table Harmonization • retroharmonize</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Ex Post Survey Table Harmonization">
<meta property="og:description" content="The goal of retroharmonize is to allow the organization 
    of data joins or panels from various data sources, particularly 
    survey microdata files, by retrospective harmonization the value codes,
    the value labels, and the missing value ranges of the data in a
    reproducible manner with the help of comprehensive s3 classes.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">retroharmonize</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/afrobarometer.html">Case Study: Working With Afrobarometer surveys</a>
    </li>
    <li>
      <a href="articles/eurobarometer.html">Case Study: Working with Eurobarometer surveys</a>
    </li>
    <li>
      <a href="articles/harmonize_labels.html">Harmonize Value Labels</a>
    </li>
    <li>
      <a href="articles/labelled_spss_survey.html">The labelled_spss_survey class</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/antaldaniel/retroharmonize/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="retroharmonize" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#retroharmonize" class="anchor"></a>retroharmonize</h1></div>
<!-- badges: start -->

<p>The goal of <code>retroharmonize</code> is to allow the organization of data joins or panels from various data sources, particularly survey microdata files, by <em>retrospective harmonization</em> the value codes, the value labels, and the missing value ranges of the data in a reproducible manner with the help of comprehensive s3 classes.</p>
<p>Currently being generalized from problems solved in the <a href="(https://github.com/antaldaniel/eurobarometer)">github.com/antaldaniel/eurobarometer</a> package (<a href="https://doi.org/10.5281/zenodo.3825700">doi</a>.)</p>
<p>You can download the manual in <a href="retroharmonize_0.1.6.pdf">PDF</a>.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Soon you can install the released version of retroharmonize from <a href="https://CRAN.R-project.org">CRAN</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"retroharmonize"</span>)</pre></div>
<p>And the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"antaldaniel/retroharmonize"</span>)</pre></div>
</div>
<div id="classes-for-retrospective-harmonization" class="section level2">
<h2 class="hasAnchor">
<a href="#classes-for-retrospective-harmonization" class="anchor"></a>Classes for retrospective harmonization</h2>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">retroharmonize</span>)
<span class="no">eb</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/read_rds.html">read_rds</a></span> (
  <span class="kw">file</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(
    <span class="st">"examples"</span>, <span class="st">"ZA7576.rds"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"retroharmonize"</span>),
  <span class="kw">id</span> <span class="kw">=</span> <span class="st">"Eurobarometer_91_5_subsample"</span>,
  <span class="kw">doi</span> <span class="kw">=</span> <span class="st">"10.4232/1.13393"</span>
  )
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">eb</span>)
<span class="co">#&gt; # A tibble: 45 x 56</span>
<span class="co">#&gt;    rowid doi   version uniqid caseid serialid isocntry       p1      p2    p3</span>
<span class="co">#&gt;  * &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl+lb&gt; &lt;dbl+l&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Euro~ doi:~ 1.0.0 ~ 5.00e7    481     3209 ES        4 [Mon~ 3 [13 ~    25</span>
<span class="co">#&gt;  2 Euro~ doi:~ 1.0.0 ~ 1.10e8     76     8706 NL        6 [Wed~ 3 [13 ~    58</span>
<span class="co">#&gt;  3 Euro~ doi:~ 1.0.0 ~ 1.10e8    343     8890 NL       11 [Mon~ 3 [13 ~    56</span>
<span class="co">#&gt;  4 Euro~ doi:~ 1.0.0 ~ 1.10e8    473     8989 NL        5 [Tue~ 3 [13 ~    62</span>
<span class="co">#&gt;  5 Euro~ doi:~ 1.0.0 ~ 1.10e8    493     9001 NL        8 [Fri~ 4 [17 ~    30</span>
<span class="co">#&gt;  6 Euro~ doi:~ 1.0.0 ~ 1.10e8    897     9272 NL        6 [Wed~ 3 [13 ~    56</span>
<span class="co">#&gt;  7 Euro~ doi:~ 1.0.0 ~ 1.10e8   1041     9379 NL        5 [Tue~ 3 [13 ~    57</span>
<span class="co">#&gt;  8 Euro~ doi:~ 1.0.0 ~ 1.10e8   1192     9493 NL        6 [Wed~ 2 [8 -~    60</span>
<span class="co">#&gt;  9 Euro~ doi:~ 1.0.0 ~ 1.10e8   1274     9543 NL        7 [Thu~ 4 [17 ~    57</span>
<span class="co">#&gt; 10 Euro~ doi:~ 1.0.0 ~ 1.10e8   1344     9590 NL        6 [Wed~ 2 [8 -~    83</span>
<span class="co">#&gt; # ... with 35 more rows, and 46 more variables: p4 &lt;dbl+lbl&gt;, p5 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   nuts &lt;chr+lbl&gt;, d7 &lt;dbl+lbl&gt;, d8 &lt;dbl+lbl&gt;, d25 &lt;dbl+lbl&gt;, d60 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qa14_5 &lt;dbl+lbl&gt;, qa14_3 &lt;dbl+lbl&gt;, qa14_2 &lt;dbl+lbl&gt;, qa14_4 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qa14_1 &lt;dbl+lbl&gt;, qa6a_5 &lt;dbl+lbl&gt;, qa6a_10 &lt;dbl+lbl&gt;, qa6b_2 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qa6a_3 &lt;dbl+lbl&gt;, qa6a_1 &lt;dbl+lbl&gt;, qa6b_4 &lt;dbl+lbl&gt;, qa6a_8 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qa6a_9 &lt;dbl+lbl&gt;, qa6a_4 &lt;dbl+lbl&gt;, qa6a_2 &lt;dbl+lbl&gt;, qa6b_1 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qa6a_6 &lt;dbl+lbl&gt;, qa6a_7 &lt;dbl+lbl&gt;, qa6a_11 &lt;dbl+lbl&gt;, qa6b_3 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qd6.1 &lt;dbl+lbl&gt;, qd6.2 &lt;dbl+lbl&gt;, qd6.3 &lt;dbl+lbl&gt;, qd6.4 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qd6.5 &lt;dbl+lbl&gt;, qd6.6 &lt;dbl+lbl&gt;, qd6.7 &lt;dbl+lbl&gt;, qd6.8 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qd6.9 &lt;dbl+lbl&gt;, qd6.10 &lt;dbl+lbl&gt;, qd6.11 &lt;dbl+lbl&gt;, qd6.12 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   qd6.13 &lt;dbl+lbl&gt;, qd6.14 &lt;dbl+lbl&gt;, qg1b &lt;dbl+lbl&gt;, qg8 &lt;dbl+lbl&gt;,</span>
<span class="co">#&gt; #   w1 &lt;dbl&gt;, w3 &lt;dbl&gt;, wex &lt;dbl&gt;</span></pre></div>
<p>The <code><a href="reference/labelled_spss_survey.html">labelled_spss_survey()</a></code> class is an extension of haven’s <a href="https://haven.tidyverse.org/reference/labelled_spss.html">labelled_spss</a> class. It not only preserver variable and value labels and the user-defined missing range, but also gives an identifier, for example, the filename to the vector. See <a href="http://retroharmonize.satellitereport.com/articles/labelled_spss_survey.html">Working With The labelled_spss_survey Class</a>.</p>
</div>
<div id="harmonize-categorical-variables-and-missing-values" class="section level2">
<h2 class="hasAnchor">
<a href="#harmonize-categorical-variables-and-missing-values" class="anchor"></a>Harmonize categorical variables and missing values</h2>
<p>The aim of <code>retroharmonize</code> is to help the reproducible harmonization of survey data. This means that not only the numeric codes, the labels and the missing range is harmonized, but the original coding is preserved as metadata attributes for documentation and validation purposes. See more in the article <a href="http://retroharmonize.satellitereport.com/articles/harmonize_labels.html">Harmonize Value Labels</a>.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">retroharmonize</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">haven</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'haven'</span>
<span class="co">#&gt; The following objects are masked from 'package:retroharmonize':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     as_factor, read_spss</span>

<span class="no">h2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/harmonize_values.html">harmonize_values</a></span>(
  <span class="no">eb</span>$<span class="no">qa14_2</span>,
  <span class="kw">harmonize_labels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(
    <span class="kw">from</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"^tend to"</span>, <span class="st">"^tend not"</span>, <span class="st">"dk"</span>, <span class="st">"^inap"</span>),
    <span class="kw">to</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"trust"</span>, <span class="st">"not_trust"</span>, <span class="st">"do_not_know"</span>, <span class="st">"inap"</span>),
    <span class="kw">numeric_values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">99997</span>,<span class="fl">99999</span>)
    ),
  <span class="kw">id</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span>(<span class="no">eb</span>, <span class="st">"id"</span>) )

<span class="no">h2</span>
<span class="co">#&gt;  [1]     0     1     1 99997     1     1     1 99997 99997     0     1     0</span>
<span class="co">#&gt; [13]     0     1     0     0     0     0 99997     1     1     1     0     0</span>
<span class="co">#&gt; [25]     1     1     0     0     0     0     1     1     1     0     1     0</span>
<span class="co">#&gt; [37] 99999 99999 99999 99999 99999 99997     0     1     1</span>
<span class="co">#&gt; attr(,"labels")</span>
<span class="co">#&gt;   not_trust       trust do_not_know    declined        inap </span>
<span class="co">#&gt;           0           1       99997       99998       99999 </span>
<span class="co">#&gt; attr(,"label")</span>
<span class="co">#&gt; [1] "EUROPEAN COMMISSION - TRUST"</span>
<span class="co">#&gt; attr(,"na_values")</span>
<span class="co">#&gt; [1] 99997 99998 99999</span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "retroharmonize_labelled_spss_survey" "haven_labelled_spss"                </span>
<span class="co">#&gt; [3] "haven_labelled"                     </span>
<span class="co">#&gt; attr(,"Eurobarometer_91_5_subsample_name")</span>
<span class="co">#&gt; [1] "eb$qa14_2"</span>
<span class="co">#&gt; attr(,"Eurobarometer_91_5_subsample_values")</span>
<span class="co">#&gt;     2     1     3     9 </span>
<span class="co">#&gt;     0     1 99997 99999 </span>
<span class="co">#&gt; attr(,"Eurobarometer_91_5_subsample_label")</span>
<span class="co">#&gt; [1] "EUROPEAN COMMISSION - TRUST"</span>
<span class="co">#&gt; attr(,"Eurobarometer_91_5_subsample_labels")</span>
<span class="co">#&gt;                                    Tend to trust </span>
<span class="co">#&gt;                                                1 </span>
<span class="co">#&gt;                                Tend not to trust </span>
<span class="co">#&gt;                                                2 </span>
<span class="co">#&gt;                                               DK </span>
<span class="co">#&gt;                                                3 </span>
<span class="co">#&gt; Inap. (not CY-TCC in isocntry and not 1 in eu28) </span>
<span class="co">#&gt;                                                9 </span>
<span class="co">#&gt; attr(,"Eurobarometer_91_5_subsample_na_values")</span>
<span class="co">#&gt; [1] 9</span>
<span class="co">#&gt; attr(,"id")</span>
<span class="co">#&gt; [1] "Eurobarometer_91_5_subsample"</span></pre></div>
</div>
<div id="create-a-longitudional-table" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-longitudional-table" class="anchor"></a>Create a longitudional table</h2>
<div class="sourceCode" id="cb5"><pre class="r"><span class="no">var1</span> <span class="kw">&lt;-</span> <span class="kw pkg">labelled</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/labelled/man/reexports.html">labelled_spss</a></span>(
  <span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">8</span>,<span class="fl">9</span>),
  <span class="kw">labels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"TRUST"</span> <span class="kw">=</span> <span class="fl">1</span>,
             <span class="st">"NOT TRUST"</span> <span class="kw">=</span> <span class="fl">0</span>,
             <span class="st">"DON'T KNOW"</span> <span class="kw">=</span> <span class="fl">8</span>,
             <span class="st">"INAP. HERE"</span> <span class="kw">=</span> <span class="fl">9</span>),
  <span class="kw">na_values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">8</span>,<span class="fl">9</span>))

<span class="no">var2</span> <span class="kw">&lt;-</span> <span class="kw pkg">labelled</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/labelled/man/reexports.html">labelled_spss</a></span>(
  <span class="kw">x</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">8</span>,<span class="fl">9</span>,<span class="fl">1</span>,<span class="fl">1</span> ),
  <span class="kw">labels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Tend to trust"</span> <span class="kw">=</span> <span class="fl">1</span>,
             <span class="st">"Tend not to trust"</span> <span class="kw">=</span> <span class="fl">2</span>,
             <span class="st">"DK"</span> <span class="kw">=</span> <span class="fl">8</span>,
             <span class="st">"Inap"</span> <span class="kw">=</span> <span class="fl">9</span>),
  <span class="kw">na_values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">8</span>,<span class="fl">9</span>))


<span class="no">h1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/harmonize_values.html">harmonize_values</a></span> (
  <span class="kw">x</span> <span class="kw">=</span> <span class="no">var1</span>,
  <span class="kw">harmonize_label</span> <span class="kw">=</span> <span class="st">"Do you trust the European Union?"</span>,
  <span class="kw">harmonize_labels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span> (
    <span class="kw">from</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"^tend\\sto|^trust"</span>, <span class="st">"^tend\\snot|not\\strust"</span>, <span class="st">"^dk|^don"</span>, <span class="st">"^inap"</span>),
    <span class="kw">to</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"trust"</span>, <span class="st">"not_trust"</span>, <span class="st">"do_not_know"</span>, <span class="st">"inap"</span>),
    <span class="kw">numeric_values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">99997</span>, <span class="fl">99999</span>)),
  <span class="kw">na_values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"do_not_know"</span> <span class="kw">=</span> <span class="fl">99997</span>,
                <span class="st">"inap"</span> <span class="kw">=</span> <span class="fl">99999</span>),
  <span class="kw">id</span> <span class="kw">=</span> <span class="st">"survey1"</span>,

)

<span class="no">h2</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/harmonize_values.html">harmonize_values</a></span> (
  <span class="kw">x</span> <span class="kw">=</span> <span class="no">var2</span>,
  <span class="kw">harmonize_label</span> <span class="kw">=</span> <span class="st">"Do you trust the European Union?"</span>,
  <span class="kw">harmonize_labels</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span> (
    <span class="kw">from</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"^tend\\sto|^trust"</span>, <span class="st">"^tend\\snot|not\\strust"</span>, <span class="st">"^dk|^don"</span>, <span class="st">"^inap"</span>),
    <span class="kw">to</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"trust"</span>, <span class="st">"not_trust"</span>, <span class="st">"do_not_know"</span>, <span class="st">"inap"</span>),
    <span class="kw">numeric_values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">99997</span>, <span class="fl">99999</span>)),
  <span class="kw">na_values</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"do_not_know"</span> <span class="kw">=</span> <span class="fl">99997</span>,
                <span class="st">"inap"</span> <span class="kw">=</span> <span class="fl">99999</span>),
  <span class="kw">id</span> <span class="kw">=</span> <span class="st">"survey2"</span>
)

<span class="no">a</span> <span class="kw">&lt;-</span> <span class="kw pkg">tibble</span><span class="kw ns">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span> ( <span class="kw">rowid</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"survey1"</span>, <span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">h1</span>)),
                      <span class="kw">hvar</span> <span class="kw">=</span> <span class="no">h1</span>,
                      <span class="kw">w</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">h1</span>), <span class="fl">0</span>,<span class="fl">1</span>))
<span class="no">b</span> <span class="kw">&lt;-</span> <span class="kw pkg">tibble</span><span class="kw ns">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span> ( <span class="kw">rowid</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"survey2"</span>, <span class="fl">1</span>:<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">h2</span>)),
                      <span class="kw">hvar</span>  <span class="kw">=</span> <span class="no">h2</span>,
                      <span class="kw">w</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="kw">n</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">h2</span>), <span class="fl">0</span>,<span class="fl">1</span>))

<span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span>(<span class="no">a</span>,<span class="no">b</span>)
<span class="co">#&gt; # A tibble: 13 x 3</span>
<span class="co">#&gt;    rowid                        hvar     w</span>
<span class="co">#&gt;    &lt;chr&gt;                &lt;retroh_dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 survey11     1 [trust]            0.453</span>
<span class="co">#&gt;  2 survey12     0 [not_trust]        0.376</span>
<span class="co">#&gt;  3 survey13     1 [trust]            0.901</span>
<span class="co">#&gt;  4 survey14     1 [trust]            0.984</span>
<span class="co">#&gt;  5 survey15     0 [not_trust]        0.449</span>
<span class="co">#&gt;  6 survey16 99997 (NA) [do_not_know] 0.936</span>
<span class="co">#&gt;  7 survey17 99999 (NA) [inap]        0.427</span>
<span class="co">#&gt;  8 survey21     0 [not_trust]        0.866</span>
<span class="co">#&gt;  9 survey22     0 [not_trust]        0.881</span>
<span class="co">#&gt; 10 survey23 99997 (NA) [do_not_know] 0.472</span>
<span class="co">#&gt; 11 survey24 99999 (NA) [inap]        0.216</span>
<span class="co">#&gt; 12 survey25     1 [trust]            0.782</span>
<span class="co">#&gt; 13 survey26     1 [trust]            0.138</span></pre></div>
<p>See the <a href="articles/afrobarometer.html">Case Study: Working With Afrobarometer</a> and <a href="articles/eurobarometer.html">Case Study: Working With Eurobarometer</a> for a further automated workflow.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that the <code>retroharmonize</code> project is released with a <a href="https://contributor-covenant.org/version/2/0/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/antaldaniel/retroharmonize/">https://​github.com/​antaldaniel/​retroharmonize/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/antaldaniel/retroharmonize/issues">https://​github.com/​antaldaniel/​retroharmonize/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Daniel Antal <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7513-6760" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#concept"><img src="https://www.repostatus.org/badges/latest/concept.svg" alt="Project Status: Minimal or no implementation has been done yet, or the repository is only intended to be a limited example, demo, or proof-of-concept."></a></li>
<li><a href="https://www.gnu.org/licenses/gpl-3.0.en.html"><img src="https://img.shields.io/badge/license-GPL--3-blue.svg" alt="license"></a></li>
<li><a href="https://cran.r-project.org/package=eurobarometer"><img src="https://www.r-pkg.org/badges/version/eurobarometer" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.3937746"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.3937746.svg" alt="DOI"></a></li>
<li><a href="https://twitter.com/intent/follow?screen_name=antaldaniel"><img src="https://img.shields.io/twitter/follow/antaldaniel.svg?style=social" alt="Follow author"></a></li>
<li><a href="https://codecov.io/gh/antaldaniel/retroharmonize?branch=master"><img src="https://codecov.io/gh/antaldaniel/retroharmonize/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://travis-ci.com/antaldaniel/retroharmonize"><img src="https://travis-ci.com/antaldaniel/retroharmonize.svg?branch=master" alt="Travis build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Daniel Antal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
